{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function TakenBooks(){const[books,setBooks]=useState([]);const navigate=useNavigate();useEffect(()=>{const taken=JSON.parse(localStorage.getItem(\"taken_books\")||\"[]\");setBooks(taken);},[]);const handleCancel=index=>{const updatedBooks=[...books];const removedBook=updatedBooks.splice(index,1)[0];setBooks(updatedBooks);localStorage.setItem(\"taken_books\",JSON.stringify(updatedBooks));// Also remove from fees\nconst dueFees=JSON.parse(localStorage.getItem(\"due_fees\")||\"[]\");const updatedFees=dueFees.filter(fee=>fee.title!==removedBook.title);localStorage.setItem(\"due_fees\",JSON.stringify(updatedFees));alert(\"\\u274C Reservation for \\\"\".concat(removedBook.title,\"\\\" has been cancelled.\"));};return/*#__PURE__*/_jsx(\"div\",{style:{background:\"linear-gradient(to right, #dfeef5, #f0f5f9)\",minHeight:\"100vh\",padding:\"50px\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:\"#fff\",padding:\"30px\",borderRadius:\"16px\",boxShadow:\"0 4px 12px rgba(0,0,0,0.1)\",width:\"90%\",maxWidth:\"600px\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:\"#2a4d69\",textAlign:\"center\",marginBottom:\"20px\"},children:\"\\uD83D\\uDCDA Books Reserved for You\"}),books.length===0?/*#__PURE__*/_jsx(\"p\",{style:{textAlign:\"center\"},children:\"You haven't taken any books yet.\"}):books.map((book,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{borderBottom:\"1px solid #eee\",padding:\"10px 0\"},children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Title:\"}),\" \",book.title]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Copies:\"}),\" \",book.copies]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Reserved On:\"}),\" \",new Date(book.reserved_on).toLocaleString()]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleCancel(index),style:{backgroundColor:\"#e74c3c\",color:\"#fff\",border:\"none\",padding:\"8px 12px\",borderRadius:\"6px\",marginTop:\"10px\",cursor:\"pointer\"},children:\"Cancel Reservation\"})]},index)),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(-1),style:{marginTop:\"20px\",padding:\"10px 20px\",borderRadius:\"8px\",backgroundColor:\"#2a4d69\",color:\"#fff\",border:\"none\",cursor:\"pointer\"},children:\"\\u2B05 Back\"})]})});}export default TakenBooks;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","TakenBooks","books","setBooks","navigate","taken","JSON","parse","localStorage","getItem","handleCancel","index","updatedBooks","removedBook","splice","setItem","stringify","dueFees","updatedFees","filter","fee","title","alert","concat","style","background","minHeight","padding","display","justifyContent","alignItems","children","borderRadius","boxShadow","width","maxWidth","color","textAlign","marginBottom","length","map","book","borderBottom","copies","Date","reserved_on","toLocaleString","onClick","backgroundColor","border","marginTop","cursor"],"sources":["C:/Users/kurub/LibraryReservationSystem/frontend/src/pages/TakenBooks.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nfunction TakenBooks() {\r\n  const [books, setBooks] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const taken = JSON.parse(localStorage.getItem(\"taken_books\") || \"[]\");\r\n    setBooks(taken);\r\n  }, []);\r\n\r\n  const handleCancel = (index) => {\r\n    const updatedBooks = [...books];\r\n    const removedBook = updatedBooks.splice(index, 1)[0];\r\n    setBooks(updatedBooks);\r\n    localStorage.setItem(\"taken_books\", JSON.stringify(updatedBooks));\r\n\r\n    // Also remove from fees\r\n    const dueFees = JSON.parse(localStorage.getItem(\"due_fees\") || \"[]\");\r\n    const updatedFees = dueFees.filter((fee) => fee.title !== removedBook.title);\r\n    localStorage.setItem(\"due_fees\", JSON.stringify(updatedFees));\r\n\r\n    alert(`‚ùå Reservation for \"${removedBook.title}\" has been cancelled.`);\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      background: \"linear-gradient(to right, #dfeef5, #f0f5f9)\",\r\n      minHeight: \"100vh\",\r\n      padding: \"50px\",\r\n      display: \"flex\",\r\n      justifyContent: \"center\",\r\n      alignItems: \"center\"\r\n    }}>\r\n      <div style={{\r\n        background: \"#fff\",\r\n        padding: \"30px\",\r\n        borderRadius: \"16px\",\r\n        boxShadow: \"0 4px 12px rgba(0,0,0,0.1)\",\r\n        width: \"90%\",\r\n        maxWidth: \"600px\"\r\n      }}>\r\n        <h2 style={{ color: \"#2a4d69\", textAlign: \"center\", marginBottom: \"20px\" }}>\r\n          üìö Books Reserved for You\r\n        </h2>\r\n\r\n        {books.length === 0 ? (\r\n          <p style={{ textAlign: \"center\" }}>You haven't taken any books yet.</p>\r\n        ) : (\r\n          books.map((book, index) => (\r\n            <div key={index} style={{\r\n              borderBottom: \"1px solid #eee\",\r\n              padding: \"10px 0\"\r\n            }}>\r\n              <p><strong>Title:</strong> {book.title}</p>\r\n              <p><strong>Copies:</strong> {book.copies}</p>\r\n              <p><strong>Reserved On:</strong> {new Date(book.reserved_on).toLocaleString()}</p>\r\n              <button\r\n                onClick={() => handleCancel(index)}\r\n                style={{\r\n                  backgroundColor: \"#e74c3c\",\r\n                  color: \"#fff\",\r\n                  border: \"none\",\r\n                  padding: \"8px 12px\",\r\n                  borderRadius: \"6px\",\r\n                  marginTop: \"10px\",\r\n                  cursor: \"pointer\"\r\n                }}\r\n              >\r\n                Cancel Reservation\r\n              </button>\r\n            </div>\r\n          ))\r\n        )}\r\n\r\n        <button\r\n          onClick={() => navigate(-1)}\r\n          style={{\r\n            marginTop: \"20px\",\r\n            padding: \"10px 20px\",\r\n            borderRadius: \"8px\",\r\n            backgroundColor: \"#2a4d69\",\r\n            color: \"#fff\",\r\n            border: \"none\",\r\n            cursor: \"pointer\"\r\n          }}\r\n        >\r\n          ‚¨Ö Back\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TakenBooks;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}